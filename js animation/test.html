<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>test</title>
	<style type="text/css">
body,div{
    margin: 0;
    padding: 0;
}
div{
    width: 200px;
    height: 100px;
    background: red;
    border:4px solid #000;
    margin-bottom: 10px;
    font-size: 10px;
    filter:alpha(opacity:30);     
    opacity:0.3;
}	
</style>
<script>
window.onload=function(){
 //    var lis=document.getElementsByTagName('div');
 //    for(var i=0;i<lis.length;i++){
 //    	lis[i].timer=null;
	// lis[i].onmouseover=function(){
	//         startMove(this,400);
	//     };
	// lis[i].onmouseout=function(){
	//         startMove(this,200);
	//     };
 //    }
        var div1=document.getElementById('div1');
        var div2=document.getElementById('div2');
        div1.onmouseover=function(){
        	startMove(this,'opacity',100);
        }
        div1.onmouseout=function(){
        	startMove(this,'width',30);
        }
        div2.onmouseover=function(){
        	startMove(this,'width',400);
        }
        div2.onmouseout=function(){
        	startMove(this,'width',200);
        }

};
var alpha=30;
function startMove(obj,attr,target){
            clearInterval(obj.timer);
            obj.timer=setInterval(function(){
    	       var cur=0;
                    if(attr=='opacity'){
                    	cur=parseFloat(getStyle(obj,attr))*100;
                    }else{
		cur=parseInt(getStyle(obj,attr));
                    }
	        var speed=(target-cur)/8;
	        speed=speed>0?Math.ceil(speed):Math.floor(speed);
	        if(cur == target){
	            clearInterval(obj.timer);
	        }
	        else{
	            if(attr=='opacity'){
                    	      obj.style.filter='alpha(opacity:'+(cur+speed)+')';
                    	      obj.style.opacity=(cur+speed)/100;
                        }else{
		      obj.style[attr]=cur+speed+'px';
                        }     
	        }
	    },30);
} 

function getStyle(obj,attr){
	if(obj.currentStyle){
		return obj.currentStyle[attr];

	}else{
		return getComputedStyle(obj,false)[attr];
	}
}
</script>
</head>
<body>
<div id="div1"></div>
<div id="div2"></div>
<div id="div3"></div>
</body>
</html>